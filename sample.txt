PS C:\MyData\dev\ai-agent-script-generator> poetry run python .\hitl_sample_6.py sc  12
Starting a new conversation with thread_id: 12...
*******************starting get weather api call*******************
{'get_agent': {'messages': [HumanMessage(content='what is the weather in new york', additional_kwargs={}, response_metadata={}, id='d6427787-9466-4deb-992b-63a05865f948'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_t1grFMOm2YF3wYGwk4a1xd0P', 'function': {'arguments': '{"location":"New York"}', 'name': 'get_weather'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 71, 'total_tokens': 87, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-4261296d-846b-4b01-994f-7e6968a77f17-0', tool_calls=[{'name': 'get_weather', 'args': {'location': 'New York'}, 'id': 'call_t1grFMOm2YF3wYGwk4a1xd0P', 'type': 'tool_call'}], usage_metadata={'input_tokens': 71, 'output_tokens': 16, 'total_tokens': 87, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='It might be cloudy in nyc New York', name='get_weather', id='8c897a0b-2839-4a23-98a9-46b3a9638cd7', tool_call_id='call_t1grFMOm2YF3wYGwk4a1xd0P'), AIMessage(content='The weather in New York City might be cloudy.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 103, 'total_tokens': 115, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'stop', 'logprobs': None}, id='run-90206f24-2c4c-4d25-8f9b-e41c79782036-0', usage_metadata={'input_tokens': 103, 'output_tokens': 12, 'total_tokens': 115, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
starting post weather api call
PS C:\MyData\dev\ai-agent-script-generator> poetry run python .\hitl_sample_6.py rs 12
Resuming conversation with thread_id: 12...
{'get_agent': {'messages': [HumanMessage(content='what is the weather in new york', additional_kwargs={}, response_metadata={}, id='d6427787-9466-4deb-992b-63a05865f948'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_t1grFMOm2YF3wYGwk4a1xd0P', 'function': {'arguments': '{"location":"New York"}', 'name': 'get_weather'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 71, 'total_tokens': 87, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-4261296d-846b-4b01-994f-7e6968a77f17-0', tool_calls=[{'name': 'get_weather', 'args': {'location': 'New York'}, 'id': 'call_t1grFMOm2YF3wYGwk4a1xd0P', 'type': 'tool_call'}], usage_metadata={'input_tokens': 71, 'output_tokens': 16, 'total_tokens': 87, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='It might be cloudy in nyc New York', name='get_weather', id='8c897a0b-2839-4a23-98a9-46b3a9638cd7', tool_call_id='call_t1grFMOm2YF3wYGwk4a1xd0P'), AIMessage(content='The weather in New York City might be cloudy.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 103, 'total_tokens': 115, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'stop', 'logprobs': None}, id='run-90206f24-2c4c-4d25-8f9b-e41c79782036-0', usage_metadata={'input_tokens': 103, 'output_tokens': 12, 'total_tokens': 115, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
starting post weather api call
get_weather...........................
{'post_agent': {'messages': [HumanMessage(content='what is the weather in new york', additional_kwargs={}, response_metadata={}, id='d6427787-9466-4deb-992b-63a05865f948'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_t1grFMOm2YF3wYGwk4a1xd0P', 'function': {'arguments': '{"location":"New York"}', 'name': 'get_weather'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 71, 'total_tokens': 87, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-4261296d-846b-4b01-994f-7e6968a77f17-0', tool_calls=[{'name': 'get_weather', 'args': {'location': 'New York'}, 'id': 'call_t1grFMOm2YF3wYGwk4a1xd0P', 'type': 'tool_call'}], usage_metadata={'input_tokens': 71, 'output_tokens': 16, 'total_tokens': 87, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='It might be cloudy in nyc New York', name='get_weather', id='8c897a0b-2839-4a23-98a9-46b3a9638cd7', tool_call_id='call_t1grFMOm2YF3wYGwk4a1xd0P'), AIMessage(content='The weather in New York City might be cloudy.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 103, 'total_tokens': 115, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'stop', 'logprobs': None}, id='run-90206f24-2c4c-4d25-8f9b-e41c79782036-0', usage_metadata={'input_tokens': 103, 'output_tokens': 12, 'total_tokens': 115, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_YiIQbeK7Bp9l0XwXFMgZWVTx', 'function': {'arguments': '{"location":"New York"}', 'name': 'post_weather'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 117, 'total_tokens': 133, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-1e15f825-36bf-49a0-9eb0-5a340eec2e0d-0', tool_calls=[{'name': 'post_weather', 'args': {'location': 'New York'}, 'id': 'call_YiIQbeK7Bp9l0XwXFMgZWVTx', 'type': 'tool_call'}], usage_metadata={'input_tokens': 117, 'output_tokens': 16, 'total_tokens': 133, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='It might be cloudy in nyc', name='post_weather', id='12992a73-22d3-4c53-8ebd-01f1a985b630', tool_call_id='call_YiIQbeK7Bp9l0XwXFMgZWVTx'), AIMessage(content='The weather in New York City might be cloudy.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 147, 'total_tokens': 159, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'stop', 'logprobs': None}, id='run-678033fa-2f5d-4bdc-b01c-25dab193d35b-0', usage_metadata={'input_tokens': 147, 'output_tokens': 12, 'total_tokens': 159, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
Finalized
{'messages': [HumanMessage(content='what is the weather in new york', additional_kwargs={}, response_metadata={}, id='d6427787-9466-4deb-992b-63a05865f948'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_t1grFMOm2YF3wYGwk4a1xd0P', 'function': {'arguments': '{"location":"New York"}', 'name': 'get_weather'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 71, 'total_tokens': 87, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-4261296d-846b-4b01-994f-7e6968a77f17-0', tool_calls=[{'name': 'get_weather', 'args': {'location': 'New York'}, 'id': 'call_t1grFMOm2YF3wYGwk4a1xd0P', 'type': 'tool_call'}], usage_metadata={'input_tokens': 71, 'output_tokens': 16, 'total_tokens': 87, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='It might be cloudy in nyc New York', name='get_weather', id='8c897a0b-2839-4a23-98a9-46b3a9638cd7', tool_call_id='call_t1grFMOm2YF3wYGwk4a1xd0P'), AIMessage(content='The weather in New York City might be cloudy.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 103, 'total_tokens': 115, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'stop', 'logprobs': None}, id='run-90206f24-2c4c-4d25-8f9b-e41c79782036-0', usage_metadata={'input_tokens': 103, 'output_tokens': 12, 'total_tokens': 115, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_YiIQbeK7Bp9l0XwXFMgZWVTx', 'function': {'arguments': '{"location":"New York"}', 'name': 'post_weather'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 117, 'total_tokens': 133, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-1e15f825-36bf-49a0-9eb0-5a340eec2e0d-0', tool_calls=[{'name': 'post_weather', 'args': {'location': 'New York'}, 'id': 'call_YiIQbeK7Bp9l0XwXFMgZWVTx', 'type': 'tool_call'}], usage_metadata={'input_tokens': 117, 'output_tokens': 16, 'total_tokens': 133, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='It might be cloudy in nyc', name='post_weather', id='12992a73-22d3-4c53-8ebd-01f1a985b630', tool_call_id='call_YiIQbeK7Bp9l0XwXFMgZWVTx'), AIMessage(content='The weather in New York City might be cloudy.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 147, 'total_tokens': 159, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4o-mini-2024-07-18', 'system_fingerprint': 'fp_06737a9306', 'finish_reason': 'stop', 'logprobs': None}, id='run-678033fa-2f5d-4bdc-b01c-25dab193d35b-0', usage_metadata={'input_tokens': 147, 'output_tokens': 12, 'total_tokens': 159, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}
{'finalized': None}